id: P17
slug: memory-schema
title_en: Memory Schema v1 Upgrade
title_zh: Memory Schema v1 升级器
module: m03_sessions_memory
level: 2
status: draft

goal:
  - Introduce the first structured, versioned long-term memory schema.
  - Load legacy memory_store.json generated by P16.
  - Normalize conversation_summaries into structured records.
  - Extract user:* keys into user_profile (future P6/P7 integration).
  - Produce a schema_versioned memory_store.json suitable for downstream tasks (P18 preference extraction, P19 knowledge extraction, P20 persona builder).

prerequisites:
  - project:P11
  - project:P12
  - project:P15
  - project:P16

skills:
  - structure.memory_schema
  - structure.memory_migration
  - structure.longterm_store
  - json.normalization

entrypoint: src/main.py
estimated_time_min: 30

outputs:
  - A Memory Schema v1 compliant memory_store.json.
  - Typed channels: user_profile, conversation_summaries, preferences, knowledge.
  - A long-term memory foundation ready for persona extraction in P18-P20.

links:
  substack: ""
  kaggle: ""
  notes: ""
